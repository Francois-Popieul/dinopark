{"version":3,"file":"index.js","sources":["../../../../src/ts/index.ts"],"sourcesContent":["import { PayCard } from \"../../libs/PayCard\";\r\nimport { PaymentMethod } from \"../../libs/paymentMethoidInterface\";\r\n\r\n// Get booking page elements\r\nconst dateInput: HTMLInputElement | null = document.getElementById(\"visit_date\") as HTMLInputElement;\r\nconst expiryInput: HTMLInputElement | null = document.getElementById(\"expiry_date\") as HTMLInputElement;\r\nconst bookingStepOneButton: HTMLButtonElement | null = document.getElementById(\"booking-step-one-button\") as HTMLButtonElement;\r\nconst bookingStepTwoButton: HTMLButtonElement | null = document.getElementById(\"booking-step-two-button\") as HTMLButtonElement;\r\nconst bookingSubmitButton: HTMLButtonElement | null = document.getElementById(\"booking-submit-button\") as HTMLButtonElement;\r\nconst ticketCards = document.querySelectorAll(\".booking-page-ticket-card\");\r\nconst bookingFirstStep = document.getElementById(\"booking-first-step\");\r\nconst bookingSecondStep = document.getElementById(\"booking-second-step\");\r\nconst bookingThirdStep = document.getElementById(\"booking-third-step\");\r\nconst firstBookingPage = document.getElementById(\"first-booking-page\");\r\nconst secondBookingPage = document.getElementById(\"second-booking-page\");\r\nconst thirdBookingPage = document.getElementById(\"third-booking-page\");\r\nconst firstName = document.getElementById(\"firstname\") as HTMLInputElement;\r\nconst surName = document.getElementById(\"surname\") as HTMLInputElement;\r\nconst finalSummary: HTMLElement | null = document.getElementById(\"final-summary\");\r\n\r\nlet orderSummaryHTML: string = \"\";\r\n\r\n// Set booking date constraint\r\nif (dateInput) { dateInput.min = getConstraintDate(\"complete-date\"); }\r\n\r\n// Set expiry date constraint\r\nif (expiryInput) { expiryInput.min = getConstraintDate(); }\r\n\r\n// Allow ticket selection and update booking summary\r\nticketCards.forEach((card) => {\r\n    const decreaseBtn: HTMLButtonElement = card.querySelector(\".decrease-button\") as HTMLButtonElement;\r\n    const increaseBtn: HTMLButtonElement = card.querySelector(\".increase-button\") as HTMLButtonElement;\r\n    const quantityDisplay: HTMLInputElement = card.querySelector(\".ticket-quantity\") as HTMLInputElement;\r\n\r\n    let quantity: number = 0;\r\n\r\n    increaseBtn.addEventListener(\"click\", () => {\r\n        quantity++;\r\n        quantityDisplay.value = quantity.toString();\r\n        updateBookingSummary();\r\n    });\r\n\r\n    decreaseBtn.addEventListener(\"click\", () => {\r\n        if (quantity > 0) {\r\n            quantity--;\r\n            quantityDisplay.value = quantity.toString();\r\n            updateBookingSummary();\r\n        }\r\n    });\r\n});\r\n\r\n// Switch to booking step 2 on button click\r\n\r\nbookingStepOneButton.addEventListener(\"click\", (event) => {\r\n    const bookingSummary = document.getElementById(\"booking-summary\");\r\n    console.log(bookingSummary?.innerText);\r\n    if (bookingSummary && bookingSummary.innerText == \"Aucun billet sélectionné\") {\r\n        event.preventDefault();\r\n        return;\r\n    }\r\n    else if (firstBookingPage && secondBookingPage && bookingStepOneButton && bookingFirstStep && bookingSecondStep && dateInput.value) {\r\n        bookingFirstStep.classList.remove(\"active-step\");\r\n        bookingFirstStep.classList.add(\"inactive-step\");\r\n        bookingSecondStep.classList.remove(\"inactive-step\");\r\n        bookingSecondStep.classList.add(\"active-step\");\r\n        firstBookingPage.classList.toggle(\"hidden\");\r\n        secondBookingPage.classList.toggle(\"hidden\");\r\n    }\r\n})\r\n\r\n// Switch to booking step 3 on button click\r\nbookingStepTwoButton.addEventListener(\"click\", () => {\r\n    if (secondBookingPage && thirdBookingPage && bookingStepTwoButton && bookingSecondStep\r\n        && bookingThirdStep && firstName && surName && isValidClientName(firstName.value)\r\n        && isValidClientName(surName.value)) {\r\n        bookingSecondStep.classList.remove(\"active-step\");\r\n        bookingSecondStep.classList.add(\"inactive-step\");\r\n        bookingThirdStep.classList.remove(\"inactive-step\");\r\n        bookingThirdStep.classList.add(\"active-step\");\r\n        secondBookingPage.classList.toggle(\"hidden\");\r\n        thirdBookingPage.classList.toggle(\"hidden\");\r\n        if (finalSummary) {\r\n            finalSummary.innerHTML = orderSummaryHTML;\r\n        }\r\n    }\r\n})\r\n\r\nif (bookingSubmitButton) {\r\n    bookingSubmitButton.addEventListener(\"submit\", (event) => {\r\n        event.preventDefault();\r\n    })\r\n}\r\n\r\nfunction isValidClientName(name: string): boolean {\r\n    return name.length > 2 && name.length <= 50;\r\n}\r\n\r\nfunction updateBookingSummary() {\r\n    const bookingSummary = document.getElementById(\"booking-summary\");\r\n    if (!bookingSummary) return;\r\n    bookingSummary.innerHTML = \"\";\r\n\r\n    let totalAmount = 0;\r\n    let summaryHTML = \"<ul>\";\r\n\r\n    ticketCards.forEach((card) => {\r\n        const ticketName = card.querySelector(\".ticket-name\") as HTMLParagraphElement;\r\n        const ticketPrice = card.querySelector(\".ticket-price-PH\") as HTMLParagraphElement;\r\n        const quantityDisplay: HTMLInputElement = card.querySelector(\".ticket-quantity\") as HTMLInputElement;\r\n\r\n        if (ticketName && ticketPrice && quantityDisplay) {\r\n            const name = ticketName.innerText;\r\n            const price = parseFloat(ticketPrice.innerText);\r\n            const quantity = parseInt(quantityDisplay.value);\r\n\r\n            const subtotal = price * quantity;\r\n            totalAmount += subtotal;\r\n\r\n            if (quantity > 0) {\r\n                summaryHTML += `<li>${name} × ${quantity} = ${subtotal.toFixed(2)} €</li>`;\r\n            }\r\n        }\r\n    });\r\n\r\n    summaryHTML += `</ul><br><p><strong>Total : ${totalAmount.toFixed(2)} €</strong></p>`;\r\n    if (totalAmount > 0) {\r\n        bookingSummary.innerHTML = summaryHTML;\r\n        orderSummaryHTML = summaryHTML;\r\n    }\r\n    else {\r\n        bookingSummary.innerHTML = \"Aucun billet sélectionné\";\r\n    }\r\n}\r\n\r\nfunction getConstraintDate(length?: string): string {\r\n    const currentDate: Date = new Date();\r\n    const yyyy: string = currentDate.getFullYear().toString();\r\n    const mm: string = String(currentDate.getMonth() + 1).padStart(2, \"0\");\r\n    const dd: string = String(currentDate.getDate()).padStart(2, \"0\");\r\n    const hh = String(currentDate.getHours()).padStart(2, \"0\");\r\n    const min = String(currentDate.getMinutes()).padStart(2, \"0\");\r\n    if (length == \"date-and-time\") {\r\n        return `${yyyy}-${mm}-${dd}T${hh}:${min}`;\r\n    }\r\n    else if (length == \"complete-date\") {\r\n        return `${yyyy}-${mm}-${dd}`;\r\n    }\r\n    else {\r\n        return `${yyyy}-${mm}`;\r\n    }\r\n}"],"names":[],"mappings":"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"}